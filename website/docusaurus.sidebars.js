function injectTypeDocSidebar(items) {
	return items.map((item) => {
		if (item?.link?.id !== 'api/README') {
			return item;
		}

		item.label = 'API';
		item.items = item.items.map((item) => {
			if (!item.link) {
				return item;
			}

			const pattern = /api\/([^\/]+)\/README/;
			const match = item.link.id.match(pattern);
			const dir = match[1];
			item.label = dir;

			item.items = item.items.map((item) => {
				if (!item.link) {
					return item;
				}
				const pattern = /api\/[^\/]+\/([^\/]+)\/README/;
				const match = item.link.id.match(pattern);
				const file = match[1];
				item.label = file;
				return item;
			});

			return item;
		});

		return item;
	});
}

module.exports = {
	injectTypeDocSidebar,
};

/** @type {import('@docusaurus/plugin-content-docs').SidebarsConfig} */
const sidebars = {
	// By default, Docusaurus generates a sidebar from the docs folder structure
	tutorialSidebar: [{ type: 'autogenerated', dirName: '.' }],

	// But you can create a sidebar manually
	/*
  tutorialSidebar: [
    'intro',
    'hello',
    {
      type: 'category',
      label: 'Tutorial',
      items: ['tutorial-basics/create-a-document'],
    },
  ],
   */
};
