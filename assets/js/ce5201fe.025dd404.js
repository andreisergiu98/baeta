/*! For license information please see ce5201fe.025dd404.js.LICENSE.txt */
"use strict";(self.webpackChunk_baeta_website=self.webpackChunk_baeta_website||[]).push([[4488],{4237:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"errors","title":"Error Handling","description":"Baeta provides a set of predefined GraphQL errors to handle common error scenarios in your application through the @baeta/errors package.","source":"@site/docs/errors.mdx","sourceDirName":".","slug":"/errors","permalink":"/docs/errors","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":70,"frontMatter":{"sidebar_position":70},"sidebar":"defaultSidebar","previous":{"title":"Autoloading","permalink":"/docs/autoloading"},"next":{"title":"Subscriptions","permalink":"/docs/subscriptions"}}');var s=n(7250),o=n(589);const a={sidebar_position:70},i="Error Handling",d={},l=[{value:"Available Errors",id:"available-errors",level:2},{value:"UnauthenticatedError",id:"unauthenticatederror",level:3},{value:"ForbiddenError",id:"forbiddenerror",level:3},{value:"BadUserInput",id:"baduserinput",level:3},{value:"InternalServerError",id:"internalservererror",level:3},{value:"AggregateGraphQLError",id:"aggregategraphqlerror",level:3},{value:"Error Codes",id:"error-codes",level:2},{value:"Development Mode",id:"development-mode",level:2},{value:"Custom Error Options",id:"custom-error-options",level:2},{value:"HTTP Status Codes",id:"http-status-codes",level:2}];function c(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"error-handling",children:"Error Handling"})}),"\n",(0,s.jsxs)(r.p,{children:["Baeta provides a set of predefined GraphQL errors to handle common error scenarios in your application through the ",(0,s.jsx)(r.code,{children:"@baeta/errors"})," package."]}),"\n",(0,s.jsx)(r.h2,{id:"available-errors",children:"Available Errors"}),"\n",(0,s.jsx)(r.h3,{id:"unauthenticatederror",children:"UnauthenticatedError"}),"\n",(0,s.jsx)(r.p,{children:"Used when a user needs to be authenticated to perform an action."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:'import { UnauthenticatedError } from "@baeta/errors";\n\nQuery.protectedData.$use(async ({ ctx }, next) => {\n  if (!ctx.user) {\n    throw new UnauthenticatedError();\n    // Default message: "Access denied! You need to be authenticated to perform this action!"\n  }\n  return next();\n});\n'})}),"\n",(0,s.jsx)(r.h3,{id:"forbiddenerror",children:"ForbiddenError"}),"\n",(0,s.jsx)(r.p,{children:"Used when a user doesn't have sufficient permissions."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:'import { ForbiddenError } from "@baeta/errors";\n\nQuery.adminData.$use(async ({ ctx }, next) => {\n  if (!ctx.user.isAdmin) {\n    throw new ForbiddenError();\n    // Default message: "Access denied! You don\'t have permission to perform this action!"\n  }\n  return next();\n});\n'})}),"\n",(0,s.jsx)(r.h3,{id:"baduserinput",children:"BadUserInput"}),"\n",(0,s.jsx)(r.p,{children:"Used when the provided input is invalid."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:'import { BadUserInput } from "@baeta/errors";\n\nMutation.createUser(({ args }) => {\n  if (!isValidEmail(args.email)) {\n    throw new BadUserInput("Invalid email format");\n  }\n  // ...\n});\n'})}),"\n",(0,s.jsx)(r.h3,{id:"internalservererror",children:"InternalServerError"}),"\n",(0,s.jsx)(r.p,{children:"Used for internal server errors. In development mode, it includes the original error details."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:'import { InternalServerError } from "@baeta/errors";\n\nQuery.user(async ({ args }) => {\n  try {\n    return await getUserById(args.id);\n  } catch (error) {\n    throw new InternalServerError(error as Error, "Failed to fetch user");\n  }\n});\n'})}),"\n",(0,s.jsx)(r.h3,{id:"aggregategraphqlerror",children:"AggregateGraphQLError"}),"\n",(0,s.jsx)(r.p,{children:"Used when multiple errors need to be reported together, this is mostly used internally by Baeta."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:'import { AggregateGraphQLError, BadUserInput } from "@baeta/errors";\n\nMutation.updateUser(({ args }) => {\n  const errors: GraphQLError[] = [];\n\n  if (!isValidEmail(args.email)) {\n    errors.push(new BadUserInput("Invalid email format"));\n  }\n\n  if (!isValidName(args.name)) {\n    errors.push(new BadUserInput("Invalid name format"));\n  }\n\n  if (errors.length > 0) {\n    throw new AggregateGraphQLError(errors, "Validation failed");\n  }\n\n  // ...\n});\n'})}),"\n",(0,s.jsx)(r.h2,{id:"error-codes",children:"Error Codes"}),"\n",(0,s.jsx)(r.p,{children:"Each error has a corresponding error code:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:'enum BaetaErrorCode {\n  Unauthenticated = "UNAUTHENTICATED",\n  Forbidden = "FORBIDDEN",\n  BadUserInput = "BAD_USER_INPUT",\n  AggregateError = "AGGREGATE_ERROR",\n  InternalServerError = "INTERNAL_SERVER_ERROR",\n}\n'})}),"\n",(0,s.jsx)(r.h2,{id:"development-mode",children:"Development Mode"}),"\n",(0,s.jsx)(r.p,{children:"Development mode is determined by checking the following environment variables in order:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.code,{children:"BAETA_ENV"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.code,{children:"NODE_ENV"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.code,{children:"ENVIRONMENT"})}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:["If any of these is set to ",(0,s.jsx)(r.code,{children:"'development'"}),", detailed error information will be included:"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"InternalServerError"})," includes the original error message and stack trace"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"AggregateGraphQLError"})," includes stack traces for each error"]}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"For the other errors, the stack trace is usually stripped by your GraphQL server of choice."}),"\n",(0,s.jsxs)(r.p,{children:["In production (when these variables are set to ",(0,s.jsx)(r.code,{children:"'production'"})," or are unset), these details are omitted for security."]}),"\n",(0,s.jsx)(r.h2,{id:"custom-error-options",children:"Custom Error Options"}),"\n",(0,s.jsx)(r.p,{children:"All errors accept GraphQL error options:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:'throw new UnauthenticatedError("Custom message", {\n  extensions: {\n    custom: "data",\n  },\n});\n'})}),"\n",(0,s.jsx)(r.h2,{id:"http-status-codes",children:"HTTP Status Codes"}),"\n",(0,s.jsx)(r.p,{children:"Some errors include specific HTTP status codes in their extensions:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"UnauthenticatedError"}),": 401"]}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},2410:(e,r,n)=>{var t=n(7402),s=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function l(e,r,n){var t,o={},l=null,c=null;for(t in void 0!==n&&(l=""+n),void 0!==r.key&&(l=""+r.key),void 0!==r.ref&&(c=r.ref),r)a.call(r,t)&&!d.hasOwnProperty(t)&&(o[t]=r[t]);if(e&&e.defaultProps)for(t in r=e.defaultProps)void 0===o[t]&&(o[t]=r[t]);return{$$typeof:s,type:e,key:l,ref:c,props:o,_owner:i.current}}r.Fragment=o,r.jsx=l,r.jsxs=l},7250:(e,r,n)=>{e.exports=n(2410)},589:(e,r,n)=>{n.d(r,{R:()=>a,x:()=>i});var t=n(7402);const s={},o=t.createContext(s);function a(e){const r=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(o.Provider,{value:r},e.children)}}}]);