---
sidebar_position: 3
description: ''
---

# First modules

Baeta is designed as schema first and modular.
Each module has its own schema definitions and resolvers.

### Create module schema

A module can have multiple schema files.
So there are many ways to organize it, for example separate files for types, inputs and operations.

We'll start with a simple schema file `src/modules/user/user.gql`:

```graphql
type User {
  id: ID!
  name: String!
}

type Query {
  user(id: ID): User
}
```

### Generate types

```bash
yarn generate
# or
yarn baeta generate
```

Now `src/modules/user/typedef.ts` has been created.
This is an autogenerated file that contains the type definitions of the module.

:::note
Baeta can watch for changes with the `--watch` flag.
:::

### Add resolver

Now add a resolver for the `user` query field in `src/modules/user/resolvers.ts`:

```typescript
import { getUserModule } from './typedef';

const { Query } = getUserModule();

Query.user(async (params) => {
  return {
    id: params.args.id ?? 'id',
    name: 'John Doe',
  };
});
```

Export the module and register resolvers `src/modules/user/index.ts`:

```typescript
import './resolvers';
import { getUserModule } from './typedef';

export const userModule = getUserModule();
```

### Create the application

Your first module is ready, time to use it.
Create the entry point `src/app.ts`:

```typescript
import { createApplication } from '@baeta/core';
import { userModule } from './modules/user';

import { createYoga } from 'graphql-yoga';
import { createServer } from 'node:http';

const baeta = createApplication({
  modules: [userModule],
});

const yoga = createYoga({
  schema: baeta.schema,
});

const server = createServer(yoga);

server.listen(4000, () => {
  console.log('ðŸš€ Server ready at http://localhost:4000/graphql');
});
```

:::note
We are using graphql-yoga because it's very easy to setup, but baeta is compatible with all graphql servers.
:::

### Extend modules

A module can extend other modules by extending types.

`src/modules/user-photos/user-photos.gql`

```graphql
type UserPhoto {
  id: ID!
  url: String!
}

extend type User {
  photos: [UserPhoto!]
}
```

`src/modules/user-photos/resolvers.ts`

```typescript
import { getUserPhotosModule } from './typedef';

const { User } = getUserPhotosModule();

User.photos(({ args, root, info, ctx }) => {
  return [
    {
      id: '1',
      url: 'https://baeta.io/img/logo.svg',
    },
  ];
});
```

`src/modules/user-photos/index.ts`

```typescript
import './resolvers';
import { getUserPhotosModule } from './typedef';
export const userPhotosModule = getUserPhotosModule();
```

`src/app.ts`

```typescript
import { createApplication } from '@baeta/core';
import { userModule } from './modules/user';
import { userPhotosModule } from './modules/user-photos';

const baeta = createApplication({
  modules: [userModule, userPhotosModule],
});
```

### Add a middleware
